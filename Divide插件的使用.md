## Divide插件的使用
上一篇已经说到，Soul网关代理了我们自定义的一个SpringBoot服务。
这一篇。我们就来尝试下如何实现网关的默认的Divide插件提供的负载均衡功能（好像也只能根据匹配的规则提供负载均衡的功能）
![file](http://cdn.kobefan.cn/Fs_UALRiHbkQblKA1dMF7U8nUgJw)
此选择器为我SpringBoot服务启动并连接到soul-admin之后默认生成的，但是由此产生了一个问题，当我的应用下线之后，这个选择器和选择器规则并没有下线？有待后续的研究。
同时观察表单元素。参阅Soul文档，发现有如下选择器规则
* 类型：custom flow 是自定义流量。full flow 是全流量。自定义流量就是请求会走你下面的匹配方式与条件。全流量则不走。
* 匹配方式：and 或者or 是指下面多个条件是按照and 还是or的方式来组合。
条件：
* uri:是指你根据uri的方式来筛选流量，match的方式支持模糊匹配（/**）
* header:是指根据请求头里面的字段来筛选流量。
* query: 是指根据uri的查询条件来进行筛选流量。
* ip:是指根据你请求的真实ip，来筛选流量。
* host:是指根据你请求的真实host，来筛选流量。
* post:建议不要使用。
条件匹配:
	match : 模糊匹配，建议和uri条件搭配，支持 restful风格的匹配。（/test/**）
	= : 前后值相等，才能匹配。
	regEx : 正则匹配，表示前面一个值去匹配后面的正则表达式。
	like ：字符串模糊匹配。
	
	
	> 但是官方文档中，并未给出创造了Post这种筛选方式，但是仍然不建议使用的原因，期待后续的源码的阅读能找到答案

另外在divide插件首页我们可以看到，我们可以添加除了默认生成的规则之外的规则

最后实践一下根据uri匹配的负载均衡，启动多个客户端程序，看看请求被转发到那个服务上,可以看到不同负载策略的不同表现
同时我们在选择器表单框内，可以看到随着多个客户端程序的使用，增加了配置的情况
![file](http://cdn.kobefan.cn/FtjA1np3_gn3IQDs2tj6c3n3JiQO)
另外，此处的weight权重策略和选择器规则策略谁起作用？可以试下。
将选择器配置策略调整为50，50 。选择器均衡规则调整为random。
如果选择器规则优先，那么应该两个客户端每个客户端接收一个请求，如果均衡规则优先。那么可以得到随机的请求，接下来我们试下
![file](http://cdn.kobefan.cn/FsrnCgvFTwPiULJWXSJ37-R_YDmx)
![file](http://cdn.kobefan.cn/FpPedGjdvCrco3CEeu5j9C9D8P0p)
可以看到当一个选择器和选择器规则同时满足条件时，以粒度更小的选择器规则均衡策略为准。关于这个是如何实现的，期待后续通过源码进行了解
	












## 问题
* 当我的应用下线之后，这个默认选择器和选择器规则并没有下线？这个有什么其他的考量吗？
* post筛选条件被创造，但又不建议使用的原因？
* 选择器配置权重规则和负载规则的源码实现